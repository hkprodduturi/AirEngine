import{r as a,j as e,a as y,d as g,e as k}from"./index-_KXxHUIp.js";import{L as w}from"./Layout-B3exs_6r.js";function M({user:x,logout:h,currentPage:b,setCurrentPage:p}){const[n,v]=a.useState([]),[d,j]=a.useState(!0),[l,o]=a.useState(!1),[c,m]=a.useState(!1),[u,t]=a.useState(null),i=async()=>{try{const r=await y();v(r)}catch(r){console.error(r)}finally{j(!1)}};a.useEffect(()=>{i()},[]);const f=async r=>{r.preventDefault(),m(!0);try{const s=Object.fromEntries(new FormData(r.target));s.calories&&(s.calories=Number(s.calories)),s.protein&&(s.protein=Number(s.protein)),s.carbs&&(s.carbs=Number(s.carbs)),s.fat&&(s.fat=Number(s.fat)),await g(s),r.target.reset(),o(!1),i()}catch(s){console.error(s)}finally{m(!1)}},N=async r=>{try{await k(r),t(null),i()}catch(s){console.error(s)}};return e.jsxs(w,{user:x,logout:h,currentPage:b,setCurrentPage:p,children:[e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Meals"}),e.jsx("p",{className:"text-sm text-[var(--muted)] mt-1",children:d?"Loading...":`${n.length} meals total`})]}),e.jsx("button",{onClick:()=>o(!l),className:"inline-flex items-center gap-2 px-4 py-2.5 bg-[var(--accent)] text-white rounded-[var(--radius)] font-medium hover:opacity-90 transition-all text-sm",children:l?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})," Cancel"]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})})," Add Meal"]})})]}),l&&e.jsxs("form",{onSubmit:f,className:"p-6 border border-[var(--border)] rounded-[var(--radius)] bg-[var(--surface)] space-y-4 animate-slide-up",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"New Meal"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Name"}),e.jsx("input",{type:"text",name:"name",placeholder:"Enter name...",className:"w-full border border-[var(--border-input)] rounded-[var(--radius)] px-3.5 py-2.5 bg-transparent text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Meal Type"}),e.jsxs("select",{name:"meal_type",className:"w-full border border-[var(--border-input)] rounded-[var(--radius)] px-3.5 py-2.5 bg-transparent text-sm",children:[e.jsx("option",{value:"breakfast",children:"Breakfast"}),e.jsx("option",{value:"lunch",children:"Lunch"}),e.jsx("option",{value:"dinner",children:"Dinner"}),e.jsx("option",{value:"snack",children:"Snack"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Calories"}),e.jsx("input",{type:"number",name:"calories",placeholder:"Enter calories...",className:"w-full border border-[var(--border-input)] rounded-[var(--radius)] px-3.5 py-2.5 bg-transparent text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Protein"}),e.jsx("input",{type:"number",name:"protein",placeholder:"Enter protein...",className:"w-full border border-[var(--border-input)] rounded-[var(--radius)] px-3.5 py-2.5 bg-transparent text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Carbs"}),e.jsx("input",{type:"number",name:"carbs",placeholder:"Enter carbs...",className:"w-full border border-[var(--border-input)] rounded-[var(--radius)] px-3.5 py-2.5 bg-transparent text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Fat"}),e.jsx("input",{type:"number",name:"fat",placeholder:"Enter fat...",className:"w-full border border-[var(--border-input)] rounded-[var(--radius)] px-3.5 py-2.5 bg-transparent text-sm"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:()=>o(!1),className:"px-4 py-2.5 rounded-[var(--radius)] border border-[var(--border)] hover:bg-[var(--hover)] text-sm font-medium transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:c,className:"px-6 py-2.5 bg-[var(--accent)] text-white rounded-[var(--radius)] text-sm font-medium hover:opacity-90 transition-colors disabled:opacity-50",children:c?"Creating...":"Create Meal"})]})]}),d?e.jsx("div",{className:"space-y-3 animate-pulse",children:[1,2,3,4,5].map(r=>e.jsx("div",{className:"h-16 bg-[var(--hover)] rounded-[var(--radius)]"},r))}):e.jsx("div",{className:"border border-[var(--border)] rounded-[var(--radius)] overflow-hidden",children:n.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[e.jsx("div",{className:"w-14 h-14 rounded-full bg-[var(--hover)] flex items-center justify-center mb-4",children:e.jsx("svg",{className:"w-7 h-7 text-[var(--muted)]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),e.jsx("p",{className:"text-sm font-medium mb-1",children:"No meals yet"}),e.jsx("p",{className:"text-xs text-[var(--muted)]",children:"Create your first meal to get started."})]}):e.jsx("div",{className:"divide-y divide-[var(--border)]",children:n.map(r=>e.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-[var(--hover)] transition-colors",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"font-medium truncate",children:r.name}),e.jsx("div",{className:"text-sm text-[var(--muted)] truncate",children:r.meal_type}),e.jsx("div",{className:"text-sm text-[var(--muted)] truncate",children:r.calories})]}),e.jsx("div",{className:"flex items-center gap-1 ml-4 shrink-0",children:e.jsx("button",{onClick:()=>t(r.id),className:"p-2 rounded-lg hover:bg-red-500/10 text-[var(--muted)] hover:text-red-400 transition-colors",title:"Delete",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})})})})]},r.id))})})]}),u!==null&&e.jsx("div",{className:"modal-backdrop",onClick:()=>t(null),children:e.jsxs("div",{className:"modal-panel",onClick:r=>r.stopPropagation(),children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Delete Meal"}),e.jsx("p",{className:"text-sm text-[var(--muted)] mb-6",children:"Are you sure you want to delete this meal? This action cannot be undone."}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>t(null),className:"px-4 py-2 rounded-[var(--radius)] border border-[var(--border)] hover:bg-[var(--hover)] text-sm font-medium transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>N(u),className:"px-4 py-2 rounded-[var(--radius)] bg-red-500 text-white hover:bg-red-600 text-sm font-medium transition-colors",children:"Delete"})]})]})})]})}export{M as default};
