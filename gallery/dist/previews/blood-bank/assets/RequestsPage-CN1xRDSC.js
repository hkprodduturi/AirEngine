import{r,j as e,c as f,h as g}from"./index-Du3bIrpB.js";import{L as N}from"./Layout-D--h9LbN.js";function _({user:u,logout:m,currentPage:x,setCurrentPage:p}){const[a,h]=r.useState([]),[i,v]=r.useState(!0),[n,d]=r.useState(!1),[l,o]=r.useState(!1),[y,b]=r.useState(null),c=async()=>{try{const t=await f();h(t)}catch(t){console.error(t)}finally{v(!1)}};r.useEffect(()=>{c()},[]);const j=async t=>{t.preventDefault(),o(!0);try{const s=Object.fromEntries(new FormData(t.target));s.units_needed&&(s.units_needed=Number(s.units_needed)),await g(s),t.target.reset(),d(!1),c()}catch(s){console.error(s)}finally{o(!1)}};return e.jsx(N,{user:u,logout:m,currentPage:x,setCurrentPage:p,children:e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Requests"}),e.jsx("p",{className:"text-sm text-[var(--muted)] mt-1",children:i?"Loading...":`${a.length} requests total`})]}),e.jsx("button",{onClick:()=>d(!n),className:"inline-flex items-center gap-2 px-4 py-2.5 bg-[var(--accent)] text-white rounded-[var(--radius)] font-medium hover:opacity-90 transition-all text-sm",children:n?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})," Cancel"]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})})," Add Request"]})})]}),n&&e.jsxs("form",{onSubmit:j,className:"p-6 border border-[var(--border)] rounded-[var(--radius)] bg-[var(--surface)] space-y-4 animate-slide-up",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"New Request"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Patient Name"}),e.jsx("input",{type:"text",name:"patient_name",placeholder:"Enter patient name...",className:"w-full border border-[var(--border-input)] rounded-[var(--radius)] px-3.5 py-2.5 bg-transparent text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Blood Type"}),e.jsxs("select",{name:"blood_type",className:"w-full border border-[var(--border-input)] rounded-[var(--radius)] px-3.5 py-2.5 bg-transparent text-sm",children:[e.jsx("option",{value:"a_pos",children:"A_pos"}),e.jsx("option",{value:"a_neg",children:"A_neg"}),e.jsx("option",{value:"b_pos",children:"B_pos"}),e.jsx("option",{value:"b_neg",children:"B_neg"}),e.jsx("option",{value:"ab_pos",children:"Ab_pos"}),e.jsx("option",{value:"ab_neg",children:"Ab_neg"}),e.jsx("option",{value:"o_pos",children:"O_pos"}),e.jsx("option",{value:"o_neg",children:"O_neg"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Units Needed"}),e.jsx("input",{type:"number",name:"units_needed",placeholder:"Enter units needed...",className:"w-full border border-[var(--border-input)] rounded-[var(--radius)] px-3.5 py-2.5 bg-transparent text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Urgency"}),e.jsxs("select",{name:"urgency",className:"w-full border border-[var(--border-input)] rounded-[var(--radius)] px-3.5 py-2.5 bg-transparent text-sm",children:[e.jsx("option",{value:"routine",children:"Routine"}),e.jsx("option",{value:"urgent",children:"Urgent"}),e.jsx("option",{value:"emergency",children:"Emergency"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Status"}),e.jsxs("select",{name:"status",className:"w-full border border-[var(--border-input)] rounded-[var(--radius)] px-3.5 py-2.5 bg-transparent text-sm",children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"fulfilled",children:"Fulfilled"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Hospital"}),e.jsx("input",{type:"text",name:"hospital",placeholder:"Enter hospital...",className:"w-full border border-[var(--border-input)] rounded-[var(--radius)] px-3.5 py-2.5 bg-transparent text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Requesting Doctor"}),e.jsx("input",{type:"text",name:"requesting_doctor",placeholder:"Enter requesting doctor...",className:"w-full border border-[var(--border-input)] rounded-[var(--radius)] px-3.5 py-2.5 bg-transparent text-sm"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-4 py-2.5 rounded-[var(--radius)] border border-[var(--border)] hover:bg-[var(--hover)] text-sm font-medium transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:l,className:"px-6 py-2.5 bg-[var(--accent)] text-white rounded-[var(--radius)] text-sm font-medium hover:opacity-90 transition-colors disabled:opacity-50",children:l?"Creating...":"Create Request"})]})]}),i?e.jsx("div",{className:"space-y-3 animate-pulse",children:[1,2,3,4,5].map(t=>e.jsx("div",{className:"h-16 bg-[var(--hover)] rounded-[var(--radius)]"},t))}):e.jsx("div",{className:"border border-[var(--border)] rounded-[var(--radius)] overflow-hidden",children:a.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[e.jsx("div",{className:"w-14 h-14 rounded-full bg-[var(--hover)] flex items-center justify-center mb-4",children:e.jsx("svg",{className:"w-7 h-7 text-[var(--muted)]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),e.jsx("p",{className:"text-sm font-medium mb-1",children:"No requests yet"}),e.jsx("p",{className:"text-xs text-[var(--muted)]",children:"Create your first request to get started."})]}):e.jsx("div",{className:"divide-y divide-[var(--border)]",children:a.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-[var(--hover)] transition-colors",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"font-medium truncate",children:t.patient_name}),e.jsx("div",{className:"text-sm text-[var(--muted)] truncate",children:t.blood_type}),e.jsx("div",{className:"text-sm text-[var(--muted)] truncate",children:t.units_needed})]}),e.jsx("div",{className:"flex items-center gap-1 ml-4 shrink-0",children:e.jsx("button",{onClick:()=>b(t.id),className:"p-2 rounded-lg hover:bg-[var(--hover)] text-[var(--muted)] hover:text-[var(--fg)] transition-colors",title:"Edit",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931z"})})})})]},t.id))})})]})})}export{_ as default};
